"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[9720],{49720:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var n=s(9950),a=s(73878),i=s(45358),l=s(5216),c=s(19360),o=s(1093),d=s(17595),r=s(64323),h=s(21432),u=s(95942),m=s(97937),p=s(42074),x=s(98401),g=s(52867),j=s(44414);class f extends n.Component{constructor(){super(...arguments),this.state={selectedOption:null,allOptions:[]},this.handleChange=e=>{const{feed:t,changeAccount:s}=this.props;s(e.value,t.id)}}componentDidMount(){const{feed:e}=this.props;var t,s=[];e&&e.accountList&&e.accountList.length&&e.accountList.map(((n,a)=>{n.id==e.connectedAccount&&(t={value:n.id,label:(0,j.jsxs)("span",{className:"filter-option pull-left d-flex align-items-center",children:[(0,j.jsx)("div",{className:"symbol symbol-30 random_color-2 symbol-circle mr-2 selectAcc",style:{backgroundImage:"url(".concat(n.profilePicture.replace(/\s/g,""),"),url(").concat((0,g.aG)(n.accountName,n.color),")")}}),n.accountName]},n.id)}),s.push({value:n.id,label:(0,j.jsxs)("span",{className:"filter-option pull-left d-flex align-items-center",children:[(0,j.jsx)("div",{className:"symbol symbol-30 random_color-2 symbol-circle mr-2 selectAcc",style:{backgroundImage:"url(".concat(n.profilePicture.replace(/\s/g,""),"),url(").concat((0,g.aG)(n.accountName,n.color),")")}}),n.accountName]},a)})})),this.setState({allOptions:s,selectedOption:t})}render(){const{selectedOption:e,allOptions:t}=this.state;return t&&t.length&&e&&e.value?(0,j.jsx)(x.Ay,{className:"selectedOptionData",defaultValue:e,onChange:e=>this.handleChange(e),options:t}):""}}var v=s(25984),b=s(54810);class w extends n.Component{constructor(e){super(e),this.onModerationSwitch=e=>{const{feed:t,changeStatus:s}=this.props;s(t.id,Number(e),"moderation"),this.setState({moderation:Number(e)})},this.onFeedStatusSwitch=e=>{const{feed:t,changeStatus:s}=this.props;s(t.id,Number(e),"status"),this.setState({status:Number(e)})},this.connectAccount=(e,t)=>{const s={id:e.networkId,name:e.networkName.toLowerCase()};localStorage.setItem("feedId",e.id),t&&localStorage.setItem("refresh",!0),localStorage.setItem("connectionType","manageFeed"),(0,g.go)(s,t,!0)},this.state={moderation:this.props.feed.moderation,status:this.props.feed.status}}componentDidMount(){const{feed:e}=this.props;this.setState({status:e.status,moderation:e.moderation})}render(){const{feed:e,onFeedDelete:t,changeAccount:s}=this.props,{status:n,moderation:a}=this.state;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)("span",{className:"h-34px w-34px me-2 d-flex flex-shrink-0",children:(0,j.jsx)("img",{className:"img-fluid h-100",src:(0,b.pc)("media/icons/social-icons-square/".concat((0,g.EC)(e.networkId),".svg")),height:43,width:43,alt:""})}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("p",{className:"text-gray-800 mb-0 d-flex fw-semibold",children:[(0,v.Ay)(e.name)," ",e.socialLink?(0,j.jsx)(h.A,{placement:"top",overlay:(0,j.jsx)(u.A,{children:e.tooltip}),children:(0,j.jsx)(p.N_,{className:"ms-2 text-muted",to:8!==e.networkId?e.socialLink:"https://vimeo.com/user".concat(e.accountId),target:"_blank",children:(0,j.jsx)(b.Ah,{icon:"external-link",height:12,width:12})})}):null]}),(0,j.jsx)("small",{className:"mb-0 text-gray-600",children:e.networkName})]})]})}),(0,j.jsx)("td",{children:(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[e&&e.accountList&&e.accountList.length&&e.filterId&&[1,2,3,4,5,8,65,67,26].includes(e.filterId)&&2!=e.networkId&&e.accountList.filter((t=>t.id==e.connectedAccount))?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(f,{changeAccount:s,feed:e},e.id)}):"",(0,j.jsxs)("div",{className:"d-flex ms-3",children:["Reconnect"==e.isBtntext?(0,j.jsx)(h.A,{placement:"top",overlay:(0,j.jsx)(u.A,{children:"Reconnect"}),children:(0,j.jsx)("button",{type:"button",className:"btn btn-icon btn-active-primary p-0 w-32px h-32px",onClick:()=>this.connectAccount(e,!0),children:(0,j.jsx)(b.Ah,{icon:"arrow-rotate",height:20,width:20})})}):"","Connect"==e.isBtntext?(0,j.jsx)(h.A,{placement:"top",overlay:(0,j.jsx)(u.A,{children:"Connect"}),children:(0,j.jsx)("button",{type:"button",className:"btn btn-icon btn-active-primary p-0 w-32px h-32px",onClick:()=>this.connectAccount(e,!1),children:(0,j.jsx)(b.Ah,{icon:"arrow-rotate",height:20,width:20})})}):""]})]})}),(0,j.jsxs)("td",{children:[(0,j.jsx)("p",{className:"fs-7 text-gray-800 fw-semibold mb-0",children:e.postCount?e.postCount:0}),(0,j.jsxs)("span",{className:"fs-8 text-gray-600",children:["Approved ",e.postCount>1?"Posts":"Post"]})]}),(0,j.jsx)("td",{children:(0,j.jsx)(d.A.Check,{type:"switch",checked:a,onChange:()=>this.onModerationSwitch(!a)})}),(0,j.jsx)("td",{children:(0,j.jsx)(d.A.Check,{type:"switch",checked:n,onChange:()=>this.onFeedStatusSwitch(!n)})}),(0,j.jsx)("td",{className:"pr-0 text-end",children:(0,j.jsx)("div",{className:"d-flex align-items-center justify-content-end",onClick:()=>t(e.id),children:(0,j.jsx)(h.A,{placement:"top",overlay:(0,j.jsx)(u.A,{children:"Delete"}),children:(0,j.jsx)(m.A,{variant:"icon",size:"sm",className:"btn-active-danger",children:(0,j.jsx)(b.Ah,{icon:"delete",height:20,width:20})})})})})]})}}const N=(0,a.Ng)(null,(e=>({GET_FEEDS:()=>e((0,r.LF)())})))(w);var A=s(18633),y=s(4695),C=s.n(y),S=s(9697),_=s(49157),P=s(1391);const E=new BroadcastChannel("connect");class F extends n.Component{constructor(){super(...arguments),this.controller=new AbortController,this.state={currentPage:1,showPost:10,totalPage:1,allFeeds:[],currentPageFeeds:null},this.changeTotalPost=e=>{this.setState({showPost:parseInt(e.target.value),currentPage:1},(()=>this.countAllPage()))},this.nextPrev=e=>{this.setState({currentPage:e},(()=>this.countAllPage()))},this.countAllPage=()=>{const{manageFeeds:e}=this.props,t=null===e||void 0===e?void 0:e.feeds;this.setState({allFeeds:t,totalPage:Math.ceil((t&&t.length>0?t.length:0)/this.state.showPost)})},this.changeStatus=(e,t,s)=>{this.props.ACTION_FEED_STATUS(e,t,s,this.onSuccessUpdateRedux)},this.changeAccount=(e,t)=>{this.props.ACTION_UPDATE_SOCIAL_ACCOUNT(e,t,this.onSuccessUpdateRedux)},this.onFeedDelete=e=>{C().fire({icon:"warning",title:"Are you sure?",showCloseButton:!0,showCancelButton:!0,focusConfirm:!0,confirmButtonText:"Yes",confirmButtonAriaLabel:"Yes",cancelButtonText:"No",cancelButtonAriaLabel:"Thumbs down"}).then((t=>{t.value&&this.props.ACTION_DELETE_FEED(e,this.onSuccessUpdateRedux)}))},this.onSuccessUpdateRedux=()=>{this.props.getModeration(),this.countAllPage()},this.handleMessage=async e=>{try{const{GET_FEEDS:t}=this.props,s=JSON.parse(e.data),{code:n}=s,a=localStorage.getItem("networkId"),i=localStorage.getItem("connectionType");(e.origin.includes("tagshop.ai")||e.origin.includes("localhost"))&&"manageFeed"==i&&n&&await(0,S.CJ)(parseInt(a),n,t)}catch(t){}},this.getPagination=()=>{const{currentPage:e,totalPage:t}=this.state,s=[];if(t<=5)for(let n=1;n<=t;n++)s.push(n);else e<=3?s.push(1,2,3,4,"...",t):e>t-3?s.push(1,"...",t-3,t-2,t-1,t):s.push(1,"...",e-1,e,e+1,"...",t);return s}}componentDidMount(){window.addEventListener("message",this.handleMessage,{signal:this.controller.signal}),E.addEventListener("message",this.handleMessage),this.props.GET_FEEDS(),this.countAllPage()}componentDidUpdate(e,t){var s,n;if((null===(s=this.props.manageFeeds)||void 0===s||!s.loading)&&(null===(n=this.props.manageFeeds)||void 0===n||!n.feeds.length)){const e=localStorage.getItem("wallId");e&&this.props.navigate("/content/addfeed/".concat(e))}}componentWillUnmount(){window.removeEventListener("message",this.handleMessage,{signal:this.controller.signal}),E.removeEventListener("message",this.handleMessage),this.controller.abort()}render(){const{currentPage:e,showPost:t,totalPage:s,allFeeds:n}=this.state,{manageFeeds:a}=this.props,r=this.getPagination(),h=(e-1)*t,u=n>0?n.slice(h,h+t):[];return(0,j.jsx)("div",{className:"d-flex flex-column flex-column-fluid align-items-center justify-content-center w-100 flex-position-center full-content",children:(0,j.jsx)(i.A,{fluid:!0,children:(0,j.jsxs)(l.A,{children:[(0,j.jsx)(l.A.Header,{children:(0,j.jsxs)("div",{className:"f-between flex-wrap w-100",children:[(0,j.jsx)("div",{className:"d-flex align-items-center flex-wrap my-2",children:(0,j.jsx)("h1",{className:"text-dark font-weight-bold mr-4 fs-6 mb-0",children:"Manage Feeds"})}),(0,j.jsxs)(p.N_,{to:"/content/addfeed/".concat(localStorage.getItem("wallId")),className:"btn btn-primary text-nowrap btn-min-w",children:[(0,j.jsx)(b.Ah,{icon:"plus",height:20,width:20}),"Add"]})]})}),(0,j.jsxs)(l.A.Body,{children:[(0,j.jsxs)(c.A,{variant:"danger",children:[(0,j.jsx)(c.A.Heading,{className:"f-center alert_icon_head",children:(0,j.jsxs)("span",{children:[(0,j.jsx)(b.Ah,{icon:"info",height:16,width:16,iconClass:"me-1"}),"Your Token has expired"]})}),(0,j.jsxs)("p",{className:"fw-medium mb-0",children:["Kindly Click on the reconnect button to grant permission again. For any query, reach out at ",(0,j.jsx)("a",{href:"mailto:support@tagshop.ai",children:"support@tagshop.ai"})]})]}),(0,j.jsx)("div",{className:"mb-xl-5 mb-4 d-flex flex-column justify-content-between p-3 position-relative",style:{minHeight:"calc(100vh - 260px)"},children:null!==a&&void 0!==a&&a.feeds&&null!==a&&void 0!==a&&a.feeds.length?(0,j.jsxs)(o.A,{size:"lg",className:"align-middle gs-0 gy-3",responsive:!0,children:[(0,j.jsx)("thead",{className:"thead-light",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:150},children:"Name"}),(0,j.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:150},children:"Account"}),(0,j.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:120},children:"Posts"}),(0,j.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:50},children:"Moderation"}),(0,j.jsx)("th",{className:"fw-bold text-nowrap",style:{minWidth:50},children:"Status"}),(0,j.jsx)("th",{className:"fw-bold text-nowrap text-end",style:{minWidth:70},children:"Actions"})]})}),(0,j.jsx)("tbody",{children:null!==a&&void 0!==a&&a.feeds&&null!==a&&void 0!==a&&a.feeds.length?null===a||void 0===a?void 0:a.feeds.map((e=>(0,j.jsx)(N,{feed:e,changeStatus:this.changeStatus,onFeedDelete:this.onFeedDelete,changeAccount:this.changeAccount},"tr_".concat(e.id)))):null})]}):(0,j.jsx)("div",{style:{minHeight:"calc(100vh - 500px)"},children:(0,j.jsx)(A.a,{})})})]}),(0,j.jsx)(l.A.Footer,{children:(0,j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,j.jsxs)("div",{className:"my-2 text-muted",children:["Showing ",h+1," to ",h+u.length," of ",null!==a&&void 0!==a&&a.feeds?null===a||void 0===a?void 0:a.feeds.length:0," entries"]}),(0,j.jsxs)("div",{className:"d-flex",children:[(0,j.jsxs)("span",{className:"f-center text-muted",children:["Show",(0,j.jsxs)(d.A.Select,{size:"sm",className:"mx-1",onChange:e=>this.changeTotalPost(e),children:[(0,j.jsx)("option",{value:"5",selected:5===t,children:"5"}),(0,j.jsx)("option",{value:"10",selected:10===t,children:"10"}),(0,j.jsx)("option",{value:"15",selected:15===t,children:"15"}),(0,j.jsx)("option",{value:"20",selected:20===t,children:"20"}),(0,j.jsx)("option",{value:"30",selected:30===t,children:"30"}),(0,j.jsx)("option",{value:"40",selected:40===t,children:"40"})]}),"entries"]}),s>1&&(0,j.jsxs)("div",{className:"dataTables_paginate paging_simple_numbers",id:"feed_datatable_paginate",children:[(0,j.jsx)("button",{className:"paginate_button previous ".concat(1===e?"disabled":""),disabled:1===e,id:"feed_datatable_previous",onClick:()=>{this.nextPrev(e-1)},children:"Previous"}),r.map(((t,s)=>(0,j.jsx)("span",{children:"..."===t?(0,j.jsx)("span",{className:"ellipsis",children:"..."}):(0,j.jsx)("button",{className:"paginate_button ".concat(e===t?"current":""),onClick:()=>this.setState({currentPage:t},(()=>this.countAllPage())),children:t})},s))),(0,j.jsx)("button",{className:"paginate_button next ".concat(e===s?"disabled":""),disabled:e===s,id:"feed_datatable_next",onClick:()=>{this.nextPrev(e+1)},children:"Next"})]})]})]})})]})})})}}const k=(0,a.Ng)((e=>({manageFeeds:e.manageFeeds})),(e=>({GET_FEEDS:()=>e((0,r.LF)()),ACTION_DELETE_FEED:(t,s)=>e((0,r.sP)(t,s)),ACTION_FEED_STATUS:(t,s,n,a)=>e((0,r.X)(t,s,n,a)),ACTION_UPDATE_SOCIAL_ACCOUNT:(t,s,n)=>e((0,r.ZA)(t,s,n)),getModeration:()=>e((0,_.zI)())})))((0,P.A)(F))}}]);