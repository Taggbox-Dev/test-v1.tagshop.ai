"use strict";(self.webpackChunkreact1=self.webpackChunkreact1||[]).push([[7491],{87491:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j,getNotifyLoad:()=>p});var i=s(9950),n=s(73878),a=s(74283),l=s(80409),r=s(98361),c=s(59051),o=s.n(c),d=s(14021),m=s.n(d),h=s(42074),g=s(54810),x=s(52867),f=s(44414);const p=e=>{var t={};return e&&e.length>0?(e.map((e=>{t[o()(new Date(1e3*e.message.time)).fromNow()]?t[o()(new Date(1e3*e.message.time)).fromNow()].includes(e.id)||t[o()(new Date(1e3*e.message.time)).fromNow()].push(e):t[o()(new Date(1e3*e.message.time)).fromNow()]=[e]})),t):t};class N extends i.Component{constructor(e){super(e),this.updateStatus=e=>{e.status,this.props.onNotificationToggle(),this.onRequest()},this.updateAllStatus=()=>{},this.getUnreadNotifications=e=>{if(e&&Object.keys(e).length>0){const t=Object.entries(e).reduce(((e,t)=>{let[s,i]=t;const n=i.filter((e=>0==e.status));return n.length>0&&e.push([s,n]),e}),[]);return Object.fromEntries(t)}return{}},this.onRequest=()=>{const e=a.A.parse(window.location.search);if(e&&Object.keys(e).length>0||String(window.location.href).includes("assets")){const e=x.Zz?window:new BroadcastChannel("connect");x.Zz?window.opener.postMessage(JSON.stringify({type:"assets-redirect"})):e.postMessage(JSON.stringify({type:"assets-redirect"}))}},this.state={notifications:p(e.notificationList)}}componentWillReceiveProps(e){const{notificationList:t}=e;JSON.stringify(t)!=JSON.stringify(this.state.notifications)&&this.setState({notifications:p(t)})}render(){const{notifications:e}=this.state,t=this.getUnreadNotifications(e);return(0,f.jsx)("div",{className:"w-100",children:(0,f.jsxs)(l.A.Container,{id:"notifications_tab_panel",defaultActiveKey:"all-notifications",children:[(0,f.jsxs)("div",{className:"f-between px-3 pt-2 border-bottom",children:[(0,f.jsxs)(r.A,{variant:"underline",className:"nav",children:[(0,f.jsx)(r.A.Item,{className:"",children:(0,f.jsx)(r.A.Link,{className:"me-3 px-0 fw-medium",eventKey:"all-notifications",children:"All"})}),(0,f.jsx)(r.A.Item,{className:"",children:(0,f.jsx)(r.A.Link,{className:"px-0 fw-medium",eventKey:"unread-notifications",children:"Unread"})})]}),(0,f.jsx)("div",{children:(0,f.jsx)("button",{type:"button",className:"btn btn-link btn-sm px-0 h-auto fw-bold text-decoration-none btn-active-color-primary",onClick:()=>Object.keys(t).length>0?this.updateAllStatus():{},children:"Mark all as read"})})]}),(0,f.jsx)(m(),{options:{wheelPropagation:!1},children:e&&Object.keys(e).length>0?(0,f.jsxs)(l.A.Content,{children:[(0,f.jsx)(l.A.Pane,{eventKey:"all-notifications",className:"pb-3 min-h-100",children:e&&Object.keys(e).map(((t,s)=>(0,f.jsxs)(i.Fragment,{children:[(0,f.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,f.jsx)("span",{className:"text-gray-800 fw-bold",children:t}),(0,f.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 text-light-alt d-none",children:e[t]&&e[t].length>0?e[t].length:0})]}),e[t]&&e[t].length>0?(0,f.jsx)("div",{className:"",children:e[t].map((e=>(0,f.jsxs)(h.N_,{to:e.getNotificationUrl?e.getNotificationUrl:"#",className:"px-3 d-flex align-items-start border-bottom notification-item text-decoration-none ".concat(0==e.status?"bg-light":""),onClick:()=>this.updateStatus(e),children:[(0,f.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 bg-light p-2",children:(0,f.jsx)("img",{alt:"Pic",src:e.message.photo,height:"40",width:"40",onError:e=>e.target.src=(0,g.pc)("media/images/error/image.svg")})}),(0,f.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,f.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[(0,f.jsx)("span",{className:"text-hover-primary text-gray-800 fw-bold text-decoration-none me-2",children:e.message.subject}),(0,f.jsx)("span",{className:"text-gray-500 fs-9",children:o()(new Date(1e3*e.message.time)).format("hh:mma")})]}),(0,f.jsx)("div",{className:"d-flex algin-items-start",children:(0,f.jsx)("span",{className:"text-gray-600 fs-9",children:e.message.text})})]})]},e.id)))}):0==s?(0,f.jsx)("div",{className:"f-center",style:{height:350},children:(0,f.jsx)("p",{className:"mb-0 text-muted",children:"No Notifications"})}):null]},s)))}),(0,f.jsx)(l.A.Pane,{eventKey:"unread-notifications",className:"pb-3 min-h-100",children:t&&Object.keys(t).length>0?Object.keys(t).map(((e,s)=>(0,f.jsxs)(i.Fragment,{children:[(0,f.jsxs)("div",{className:"f-between px-3 py-1",children:[(0,f.jsx)("span",{className:"text-gray-800 fw-bold",children:e}),(0,f.jsx)("span",{className:"bg-primary badge rounded-5 min-w-30 text-light-alt d-none",children:t[e]&&t[e].length>0&&t[e].filter((e=>0==e.status)).length>0?t[e].filter((e=>0==e.status)).length:0})]}),t[e]&&t[e].length>0?(0,f.jsx)("div",{className:"",children:t[e].map((e=>0==e.status?(0,f.jsxs)(h.N_,{to:e.getNotificationUrl?e.getNotificationUrl:"#",className:"px-3 d-flex align-items-start border-bottom notification-item bg-light text-decoration-none",onClick:()=>this.updateStatus(e),children:[(0,f.jsx)("div",{className:"symbol symbol-38 rounded-1 overflow-hidden me-2 bg-light p-2",children:(0,f.jsx)("img",{alt:"Pic",src:e.message.photo,height:"40",width:"40",onError:e=>e.target.src=(0,g.pc)("media/images/error/image.svg")})}),(0,f.jsxs)("div",{className:"d-flex align-items-start flex-column flex-grow-1",children:[(0,f.jsxs)("div",{className:"d-flex algin-items-center justify-content-between w-100",children:[(0,f.jsx)("span",{className:"text-hover-primary text-gray-800 fw-bold text-decoration-none me-2",children:e.message.subject}),(0,f.jsx)("span",{className:"text-gray-500 fs-9",children:o()(new Date(1e3*e.message.time)).format("hh:mma")})]}),(0,f.jsx)("div",{className:"d-flex algin-items-start",children:(0,f.jsx)("span",{className:"text-gray-600 fs-9",children:e.message.text})})]})]},e.id):null))}):null]},s))):(0,f.jsx)("div",{className:"f-center",style:{height:350},children:(0,f.jsx)("p",{className:"mb-0 text-muted",children:"No Unread Notifications"})})})]}):(0,f.jsx)("div",{className:"f-center",style:{height:150},children:(0,f.jsx)("p",{className:"mb-0 text-muted",children:"No Notifications"})})})]})})}}const j=(0,n.Ng)((e=>({notificationList:e.notification.latestNotifionList})))((0,i.memo)(N))}}]);